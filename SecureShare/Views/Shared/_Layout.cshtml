<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>@ViewBag.Title</title>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet/less" href="@Url.Content("~/Content/Site.less")" />
	<script src="@Url.Content("~/Content/js/libs/less-1.3.0.min.js")"></script>

	<!--script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script-->
	<script src="@Url.Content("~/Content/js/libs/jquery-1.7.2.min.js")"></script>

	<script src="@Url.Content("~/Content/bootstrap/js/bootstrap-button.js")"></script>
	<script src="@Url.Content("~/Content/bootstrap/js/bootstrap-modal.js")"></script>
	<script src="@Url.Content("~/Content/bootstrap/js/bootstrap-transition.js")"></script>
	<script src="@Url.Content("~/Content/bootstrap/js/bootstrap-dropdown.js")"></script>
	<script src="@Url.Content("~/Content/bootstrap/js/bootstrap-alert.js")"></script>
	
	<script src="@Url.Content("~/Content/js/libs/jquery.masonry.js")"></script>
	<script src="@Url.Content("~/Content/js/libs/jquery.cookie.js")"></script>
	<script src="@Url.Content("~/Content/js/textHelpers.js")"></script>
	<script src="@Url.Content("~/Content/js/libs/amplify.min.js")"></script>
	<script src="@Url.Content("~/Content/js/libs/knockout-2.1.0.js")"></script>
	<script src="@Url.Content("~/Content/js/libs/knockout-mapping-2.2.0.js")"></script>
	
	<script src="@Url.Content("~/Content/js/knockoutExtenders.js")"></script>
	<script src="@Url.Content("~/Content/js/knockoutBindings.js")"></script>

	<script src="@Url.Content("~/Content/js/apiroutes.js")"></script>
	
	<script src="@Url.Content("~/Content/js/viewmodels/RegisterPanel.js")"></script>
	<script src="@Url.Content("~/Content/js/viewmodels/LoginPanel.js")"></script>
	<script src="@Url.Content("~/Content/js/viewmodels/UserEmailPanel.js")"></script>
	<script src="@Url.Content("~/Content/js/viewmodels/main.js")"></script>
</head>

<body>

	

	<div class="container">

		<header class="row-fluid">
			<div class="span4" id="header"><h1><span class="color">Share</span>Grid</h1></div>
			
			<div class="span4" id="alertsContainer" data-bind="foreach: alerts">
				<div class="alert fade in" data-bind="css: {'alert-success': type == 'success', 'alert-info': type == 'info', 'alert-error': type == 'error'}">
					<a class="close" data-dismiss="alert" href="#">×</a>
					<strong data-bind="optionalText: title"></strong>
					<span data-bind="optionalText: text" />
				</div>
			</div>

			<nav class="span4" id="menu">
				<ul class="nav nav-pills pull-right">
					<!-- ko ifnot: isLoggedIn -->
					<li><a href="#login" data-toggle="modal">Login</a></li>
					<li><a href="#register" data-toggle="modal">Register</a></li>
					<!-- /ko -->

					<!-- ko if: isLoggedIn -->

					<!-- Channels dropdown -->
					<li class="dropdown" data-bind="visible: isLoggedIn">
						<a class="dropdown-toggle" data-toggle="dropdown" href="#">
							Channels
							<b class="caret"></b>
						</a>
						<ul class="dropdown-menu">
							<li><a href="@Url.Action("Index", "Channels")">Channel 1</a></li>
							<li><a href="@Url.Action("Index", "Channels")">Channel 2</a></li>
							<li><a href="@Url.Action("Index", "Channels")">Channel 3</a></li>

							<li class="divider"></li>

							<li><a href="#subscribetochannel" data-toggle="modal"><i class="icon-eye-open"></i> Subscribe to channel</a></li>
							<li><a href="#registerchannel" data-toggle="modal"><i class="icon-plus-sign"></i> Register new channel</a></li>
						</ul>
					</li>
		
					<!-- User profile dropdown -->
					<li class="dropdown" data-bind="visible: isLoggedIn">
						<a class="dropdown-toggle" data-toggle="dropdown" href="#">
							Profile
							<b class="caret"></b>
						</a>
						<ul class="dropdown-menu">
							<li><a href="#userEmail" data-toggle="modal"><i class="icon-envelope-alt"></i> Change email</a></li>
							<li><a href="#userPassword" data-toggle="modal"><i class="icon-user"></i> Change password</a></li>
							<li class="divider"></li>
							<li><a href="#logout" data-bind="click: LogOut"><i class="icon-signout"></i> Logout</a></li>
						</ul>
					</li>

					<!-- /ko -->
				</ul>
			
			</nav>
		</header>
		
		<div id="login" class="modal fade hide" data-bind="with: loginPanel">
			@Html.Partial("../Users/LoginPartial")
		</div>
		<div id="register" class="modal fade hide" data-bind="with: registerPanel">
			@Html.Partial("../Users/RegisterPartial")
		</div>

		<div id="registerchannel" class="modal fade hide">
			@Html.Partial("../Channels/RegisterPartial")
		</div>

		<div id="subscribetochannel" class="modal fade hide">
			@Html.Partial("../Channels/SubscribePartial")
		</div>

		<div id="userEmail" class="modal fade hide" data-bind="with: userEmailPanel">
			@Html.Partial("../Users/EmailPartial")
		</div>

		<div id="userPassword" class="modal fade hide">
			@Html.Partial("../Users/PasswordPartial")
		</div>

		<div id="content">
		@RenderBody()
		</div>
	</div>
</body>
</html>
